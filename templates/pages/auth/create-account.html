{{inject 'passwordRequirements' settings.password_requirements}}
{{#partial "page"}}
    {{> components/common/breadcrumbs breadcrumbs=breadcrumbs}}
    <h1 class="page-heading">{{lang 'create_account.heading' }}</h1>

    <div class="account account--fixed">
        <div class="account-body">
            {{#if forms.create_account.error}}
                {{> components/common/alert-error forms.create_account.error}}
            {{/if}}
            {{#if settings.account_creation_enabled}}
                <form action="{{urls.auth.save_new_account}}" data-create-account-form method="post" class="form">
                    <div class="form-row form-row--half">
                        {{#each forms.create_account.account_fields }}
                            {{{dynamicComponent 'components/common/forms'}}}
                        {{/each}}
                        {{#each forms.create_account.address_fields }}
                            {{{dynamicComponent 'components/common/forms'}}}
                        {{/each}}
                        {{inject 'required' (lang 'common.required')}}
                        {{inject 'state_error' (lang 'errors.state_error')}}
                    </div>
                    {{{ forms.create_account.recaptcha.markup}}}
                    <div class="form-actions">
                        <input type="submit" class="button button--primary" value="{{lang 'forms.create_account.submit_value' }}" />
                    </div>
                </form>
            {{/if}}
        </div>
    </div>

<style>
    [data-create-account-form] #FormField_28, [data-create-account-form] #FormField_32 { display: none; }
</style>
<script>
 document.addEventListener('click', function(e) {
   /*if(e.target.value != undefined) {
      if(e.target.value.toLowerCase() == 'business') {
        document.querySelector('[data-create-account-form] #FormField_28').style.display = 'block';
        document.querySelector('[data-create-account-form] #FormField_32').style.display = 'block';
      } if(e.target.value.toLowerCase() == 'private') {
        document.querySelector('[data-create-account-form] #FormField_28').style.display = 'none';
        document.querySelector('[data-create-account-form] #FormField_32').style.display = 'none';
      }
   }*/

   if(e.target.type.toLowerCase() == 'submit' && e.target.classList.contains('button')) {

      if(document.querySelector('#FormField_26_select').selectedIndex == 1) {
          if(document.querySelector('#FormField_26_select').value.trim() != '') {
              if(document.querySelector('#FormField_28_select').value.trim() == '') {
                    e.preventDefault();
                    alert('Please select industry');
                    return false;
              } else if(document.querySelector('#FormField_32_input').value.trim() == '') {
                    e.preventDefault();
                    alert('Please fill Job title field');
                    return false;
              }
          }
      }

      /*if(document.querySelector('#FormField_30 input[name="FormField[1][30]"]:checked') != null) {
          console.log(document.querySelector('#FormField_30 input[name="FormField[1][30]"]:checked').value);
         if(document.querySelector('#FormField_30 input[name="FormField[1][30]"]:checked').value.toLowerCase() == 'business') {
                if(document.querySelector('[data-create-account-form] #FormField_28_select').value.trim() == '') {
                    e.preventDefault();
                    alert('Please select industry');
                    return false;
                } else if(document.querySelector('[data-create-account-form] #FormField_32_input').value.trim() == '') {
                    e.preventDefault();
                    alert('Please fill Job title field');
                    return false;
                }
         }
      } */
   }
});

document.addEventListener('change', function(e) {
    if(e.target.id == 'FormField_26_select') {
        if(e.target.value.trim() == '') {
        document.querySelector('[data-create-account-form] #FormField_28').style.display = 'none';
        document.querySelector('[data-create-account-form] #FormField_32').style.display = 'none';
          document.querySelector('#FormField_28_select').selectedIndex = 0;
          document.querySelector('#FormField_32_input').value = '';
       } else if(e.target.value.toLowerCase() == 'business') {
        document.querySelector('[data-create-account-form] #FormField_28').style.display = 'block';
        document.querySelector('[data-create-account-form] #FormField_32').style.display = 'block';
       } else {
        document.querySelector('[data-create-account-form] #FormField_28').style.display = 'none';
        document.querySelector('[data-create-account-form] #FormField_32').style.display = 'none';
         document.querySelector('#FormField_28_select').selectedIndex = 0;
         document.querySelector('#FormField_32_input').value = '';
       }

    }
});

</script>

{{/partial}}
{{> layout/base}}

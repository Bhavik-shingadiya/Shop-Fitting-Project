{{#partial "head"}}

{{{ checkout.checkout_head }}}
{{{ stylesheet '/assets/css/optimized-checkout.css' }}}
{{ getFontsCollection }}

<script type="text/javascript">
    window.language = {{{langJson 'optimized_checkout'}}};
</script>

{{{head.scripts}}}

{{/partial}}

{{#partial "page"}}
<header class="checkoutHeader optimizedCheckout-header">
    <div class="checkoutHeader-content">
        <h1 class="is-srOnly">{{lang 'checkout.title'}}</h1>
        <h2 class="checkoutHeader-heading">
            <a class="checkoutHeader-link" href="{{urls.home}}">
                {{#if checkout.header_image}}
                    <img alt="{{settings.store_logo.title}}" class="checkoutHeader-logo" id="logoImage" src="{{ checkout.header_image }}"/>
                {{ else }}
                    <span class="header-logo-text">{{settings.store_logo.title}}</span>
                {{/if}}
            </a>
        </h2>
    </div>
</header>

{{{ checkout.checkout_content }}}

<style>
.dynamic-form-field.dynamic-form-field--field_28, .dynamic-form-field.dynamic-form-field--field_32 {
    display: none;
}

.dynamic-form-field--field_28 small.optimizedCheckout-contentSecondary, .dynamic-form-field--field_32 small.optimizedCheckout-contentSecondary {
    display: none;
}
</style>

<script>

(function () {
     var send = XMLHttpRequest.prototype.send
     XMLHttpRequest.prototype.send = function () {
         this.addEventListener('load', function () {
              if(document.querySelector('#checkoutShippingAddress #field_26Input')) {
                    if(document.querySelector('#checkoutShippingAddress #field_26Input').value.trim() == '') {
                        document.querySelector('#checkoutShippingAddress .dynamic-form-field--field_28').style.display = 'none';
                        document.querySelector('#checkoutShippingAddress .dynamic-form-field--field_32').style.display = 'none';
                    } else if(document.querySelector('#checkoutShippingAddress #field_26Input').value == 0) {
                         document.querySelector('#checkoutShippingAddress .dynamic-form-field--field_28').style.display = 'block';
                         document.querySelector('#checkoutShippingAddress .dynamic-form-field--field_32').style.display = 'block';
                    } else {
                        document.querySelector('#checkoutShippingAddress #field_28Input').selectedIndex = 0;
                    }
              }
         });
         return send.apply(this, arguments)
     }
 })();


document.addEventListener('change', function(e) {
   if(e.target.id == 'field_26Input') {
       if(e.target.value.trim() == '') {
          document.querySelector('#checkoutShippingAddress .dynamic-form-field--field_28').style.display = 'none'
          document.querySelector('#checkoutShippingAddress .dynamic-form-field--field_32').style.display = 'none'
          document.querySelector('#checkoutShippingAddress #field_28Input').selectedIndex = 0;
       } else if(e.target.value == 0) {
         document.querySelector('#checkoutShippingAddress .dynamic-form-field--field_28').style.display = 'block'
         document.querySelector('#checkoutShippingAddress .dynamic-form-field--field_32').style.display = 'block'
       } else {
         document.querySelector('#checkoutShippingAddress .dynamic-form-field--field_28').style.display = 'none'
         document.querySelector('#checkoutShippingAddress .dynamic-form-field--field_32').style.display = 'none'
         document.querySelector('#checkoutShippingAddress #field_28Input').selectedIndex = 0;
       }
   }
});

document.addEventListener('click', function(e) {
    if(e.target.id == 'checkout-shipping-continue') {
        if(document.querySelector('#checkoutShippingAddress #field_26Input').selectedIndex == 1) {
            if(document.querySelector('#field_26Input').value.trim() != '') {
                if(document.querySelector('#checkoutShippingAddress #field_28Input').value.trim() == '') {
                    e.preventDefault();
                    alert('Please select industry');
                    return false;
                } else if(document.querySelector('#checkoutShippingAddress #field_32Input').value.trim() == '') {
                    e.preventDefault();
                    alert('Please fill Job title field');
                    return false;
                }
            }
        }
    }
});

</script>

{{{ footer.scripts }}}

{{/partial}}

{{> layout/empty}}
